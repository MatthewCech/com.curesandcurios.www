<!DOCTYPE html>
<html lang="en">

  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ALERT</title>
  </head>

  <body style="text-align: center;">
    <h1>~ Vape Watch ~</h1>

    <script>
		// ------- Handle alerts -------
		navigator.serviceWorker.register('sw.js');

		function showNotification() {
		  Notification.requestPermission(function(result) {
		    if (result === 'granted') {

		    	console.log("ok");
		    	
		      navigator.serviceWorker.ready.then(function(registration) {
		        registration.showNotification('Cloud Alert!', {
		          body: 'Your child is vaping!',
		          icon: 'vape.png',
		          vibrate: [200, 100, 200, 100, 200, 100, 200],
		          tag: 'vape'
		        });
		      });
		    }
		  });
		}

		// ------- Request the ability to make alerts -------
		Notification.requestPermission(function(status) {
		    console.log('Notification permission status:', status);
		    showNotification();
		});
    </script>
  </body>

</html>
